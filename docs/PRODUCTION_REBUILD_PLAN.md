# ç”Ÿäº§çº§åˆ«é‡æ„è®¡åˆ’ - Todo åº”ç”¨ v2.0

## ä¸€ã€é¡¹ç›®æ„¿æ™¯

æ„å»ºä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„ç°ä»£åŒ–å¾…åŠäº‹é¡¹åº”ç”¨ï¼Œå…·å¤‡ï¼š
- ğŸ¨ ç°ä»£åŒ–ã€å“åº”å¼UIè®¾è®¡
- ğŸŒ å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒï¼ˆä¸­/è‹±/å¤šè¯­è¨€ï¼‰
- ğŸ³ ä¸€é”®Dockeréƒ¨ç½²
- ğŸ” å®Œå–„çš„ç”¨æˆ·è®¤è¯ä¸æƒé™ç®¡ç†
- âš¡ é«˜æ€§èƒ½ä¸è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
- ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡

---

## äºŒã€æŠ€æœ¯æ¶æ„é‡æ„

### 2.1 å‰ç«¯æ¶æ„ (apps/web)

#### æŠ€æœ¯æ ˆå‡çº§
| å±‚çº§ | å½“å‰ | å‡çº§å | è¯´æ˜ |
|------|------|--------|------|
| UIæ¡†æ¶ | åŸç”ŸCSS | Tailwind CSS + Headless UI | ç°ä»£åŒ–ã€å¯ç»´æŠ¤çš„æ ·å¼ç³»ç»Ÿ |
| ç»„ä»¶åº“ | æ—  | Radix UI / shadcn/ui | æ— éšœç¢ã€å¯è®¿é—®çš„ç»„ä»¶åŸºç¡€ |
| çŠ¶æ€ç®¡ç† | useState | Zustand + React Query | æœåŠ¡ç«¯çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€åˆ†ç¦» |
| è·¯ç”± | React Router | React Router v6 + æ•°æ®API | ç°ä»£åŒ–è·¯ç”±æ¨¡å¼ |
| å›½é™…åŒ– | æ—  | i18next + react-i18next | å®Œæ•´å›½é™…åŒ–æ–¹æ¡ˆ |
| è¡¨å•å¤„ç† | åŸç”Ÿ | React Hook Form + Zod | ç±»å‹å®‰å…¨è¡¨å•éªŒè¯ |
| å›¾æ ‡ | Emoji | Lucide React | ç»Ÿä¸€ã€ä¸“ä¸šçš„å›¾æ ‡ç³»ç»Ÿ |
| åŠ¨ç”» | CSS | Framer Motion | æµç•…çš„äº¤äº’åŠ¨ç”» |

#### æ–°ç›®å½•ç»“æ„
```
apps/web/src/
â”œâ”€â”€ app/                    # åº”ç”¨å…¥å£ä¸å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ providers.tsx       # å…¨å±€Providerç»„åˆ
â”‚   â”œâ”€â”€ router.tsx          # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ layout.tsx          # æ ¹å¸ƒå±€
â”œâ”€â”€ components/             # ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                 # åŸºç¡€UIç»„ä»¶ (Button, Inputç­‰)
â”‚   â”œâ”€â”€ layout/             # å¸ƒå±€ç»„ä»¶ (Sidebar, Headerç­‰)
â”‚   â”œâ”€â”€ task/               # ä»»åŠ¡ç›¸å…³ç»„ä»¶
â”‚   â””â”€â”€ list/               # åˆ—è¡¨ç›¸å…³ç»„ä»¶
â”œâ”€â”€ features/               # åŠŸèƒ½æ¨¡å— (æŒ‰åŠŸèƒ½ç»„ç»‡)
â”‚   â”œâ”€â”€ auth/               # è®¤è¯åŠŸèƒ½
â”‚   â”œâ”€â”€ tasks/              # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ lists/              # åˆ—è¡¨ç®¡ç†
â”‚   â”œâ”€â”€ my-day/             # æˆ‘çš„ä¸€å¤©
â”‚   â””â”€â”€ settings/           # è®¾ç½®
â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ lib/                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ api.ts              # APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ i18n.ts             # å›½é™…åŒ–é…ç½®
â”‚   â””â”€â”€ utils.ts            # å·¥å…·å‡½æ•°
â”œâ”€â”€ locales/                # ç¿»è¯‘æ–‡ä»¶
â”‚   â”œâ”€â”€ zh-CN/              # ç®€ä½“ä¸­æ–‡
â”‚   â””â”€â”€ en/                 # è‹±æ–‡
â”œâ”€â”€ stores/                 # ZustandçŠ¶æ€ç®¡ç†
â”œâ”€â”€ styles/                 # å…¨å±€æ ·å¼
â””â”€â”€ types/                  # TypeScriptç±»å‹å®šä¹‰
```

### 2.2 åç«¯æ¶æ„ (apps/api)

#### æŠ€æœ¯æ ˆå‡çº§
| åŠŸèƒ½ | å½“å‰ | å‡çº§å | è¯´æ˜ |
|------|------|--------|------|
| æ¡†æ¶ | Express | Fastify | æ›´å¥½çš„æ€§èƒ½ã€ç±»å‹å®‰å…¨ |
| ORM | åŸç”ŸSQL | Prisma | ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ |
| éªŒè¯ | æ‰‹åŠ¨ | Zod | è¿è¡Œæ—¶ç±»å‹éªŒè¯ |
| è®¤è¯ | Stub | JWT + bcrypt | å®Œæ•´è®¤è¯ç³»ç»Ÿ |
| APIæ ¼å¼ | REST | REST + OpenAPI | æ ‡å‡†åŒ–APIæ–‡æ¡£ |
| æ—¥å¿— | console | Pino | ç»“æ„åŒ–æ—¥å¿— |

#### æ–°ç›®å½•ç»“æ„
```
apps/api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/             # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ db/                 # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ prisma/         # Prisma schemaå’Œè¿ç§»
â”‚   â”‚   â””â”€â”€ seed.ts         # ç§å­æ•°æ®
â”‚   â”œâ”€â”€ modules/            # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/           # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ users/          # ç”¨æˆ·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ lists/          # åˆ—è¡¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ tasks/          # ä»»åŠ¡æ¨¡å—
â”‚   â”‚   â””â”€â”€ steps/          # æ­¥éª¤æ¨¡å—
â”‚   â”œâ”€â”€ shared/             # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ errors/         # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ app.ts              # Fastifyåº”ç”¨é…ç½®
â”‚   â””â”€â”€ server.ts           # æœåŠ¡å…¥å£
â”œâ”€â”€ tests/                  # æµ‹è¯•
â””â”€â”€ prisma/
    â””â”€â”€ schema.prisma       # æ•°æ®åº“æ¨¡å‹
```

### 2.3 æ•°æ®åº“æ¶æ„ (Prisma Schema)

```prisma
// ç”¨æˆ·æ¨¡å‹
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String   // bcryptå“ˆå¸Œ
  name      String?
  avatar    String?
  locale    String   @default("zh-CN")
  theme     String   @default("system")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  lists     List[]
  tasks     Task[]
  steps     Step[]
  myDayTasks MyDayTask[]
}

// åˆ—è¡¨æ¨¡å‹
model List {
  id          String   @id @default(uuid())
  name        String
  color       String   @default("#3b82f6")
  isDefault   Boolean  @default(false)
  isArchived  Boolean  @default(false)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  tasks       Task[]

  @@index([userId])
}

// ä»»åŠ¡æ¨¡å‹
model Task {
  id          String    @id @default(uuid())
  title       String
  note        String    @default("")
  isCompleted Boolean   @default(false)
  isImportant Boolean   @default(false)
  dueDate     DateTime?
  reminderAt  DateTime?
  priority    Priority  @default(normal)
  order       Int       @default(0)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  userId      String
  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  listId      String
  list        List      @relation(fields: [listId], references: [id], onDelete: Cascade)
  steps       Step[]
  myDayTasks  MyDayTask[]

  @@index([userId])
  @@index([listId])
  @@index([dueDate])
}

// æ­¥éª¤æ¨¡å‹
model Step {
  id          String   @id @default(uuid())
  title       String
  isCompleted Boolean  @default(false)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  taskId      String
  task        Task     @relation(fields: [taskId], references: [id], onDelete: Cascade)
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([taskId])
}

// æˆ‘çš„ä¸€å¤©
model MyDayTask {
  id        String   @id @default(uuid())
  date      String   // YYYY-MM-DD æ ¼å¼
  createdAt DateTime @default(now())

  taskId    String
  task      Task     @relation(fields: [taskId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([taskId, date])
  @@index([userId, date])
}

enum Priority {
  low
  normal
  high
}
```

---

## ä¸‰ã€UI/UX é‡æ„è§„åˆ’

### 3.1 è®¾è®¡ç³»ç»Ÿ

#### è‰²å½©ç³»ç»Ÿ
```css
/* ä¸»è‰²è°ƒ - æ¸…æ–°è“ */
--primary-50: #eff6ff;
--primary-100: #dbeafe;
--primary-200: #bfdbfe;
--primary-300: #93c5fd;
--primary-400: #60a5fa;
--primary-500: #3b82f6;  /* ä¸»è‰² */
--primary-600: #2563eb;
--primary-700: #1d4ed8;
--primary-800: #1e40af;
--primary-900: #1e3a8a;

/* è¯­ä¹‰è‰² */
--success: #22c55e;
--warning: #f59e0b;
--error: #ef4444;
--info: #3b82f6;

/* ä¸­æ€§è‰² */
--gray-50: #f9fafb;
--gray-100: #f3f4f6;
--gray-200: #e5e7eb;
--gray-300: #d1d5db;
--gray-400: #9ca3af;
--gray-500: #6b7280;
--gray-600: #4b5563;
--gray-700: #374151;
--gray-800: #1f2937;
--gray-900: #111827;
```

#### å¸ƒå±€ç³»ç»Ÿ
- **ä¾§è¾¹æ **: 256px å›ºå®šå®½åº¦ï¼Œå¯æŠ˜å 
- **ä¸»å†…å®¹åŒº**: è‡ªé€‚åº”å®½åº¦
- **ä»»åŠ¡è¯¦æƒ…**: æŠ½å±‰å¼è®¾è®¡ï¼Œå³ä¾§æ»‘å‡º
- **ç§»åŠ¨ç«¯**: åº•éƒ¨å¯¼èˆª + å…¨å±é¡µé¢

### 3.2 æ ¸å¿ƒç•Œé¢

#### 1. ç™»å½•/æ³¨å†Œé¡µ
- ç®€æ´ç°ä»£çš„è®¾è®¡
- æ”¯æŒé‚®ç®±+å¯†ç ç™»å½•
- è¡¨å•éªŒè¯ä¸é”™è¯¯æç¤º

#### 2. ä¸»å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Logo    My Day  Important  Planned  [Search]  [User]   â”‚  â† é¡¶éƒ¨å¯¼èˆª
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                              â”‚
â”‚  Lists   â”‚    ğŸ“‹ Task List                              â”‚
â”‚  â”€â”€â”€â”€â”€   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  Work    â”‚    â”‚  â˜  Add a task...                   â”‚   â”‚
â”‚  Personalâ”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  ...     â”‚    â”‚  â˜ Task 1                    â­ ğŸ“…  â”‚   â”‚
â”‚          â”‚    â”‚  â˜‘ Task 2 (done)             â­     â”‚   â”‚
â”‚  + New   â”‚    â”‚  â˜ Task 3                    ğŸ“…     â”‚   â”‚
â”‚          â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                                              â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† ä»»åŠ¡è¯¦æƒ…æŠ½å±‰       â”‚
â”‚          â”‚  â”‚ Task Details    â”‚    (ç‚¹å‡»ä»»åŠ¡æ˜¾ç¤º)      â”‚
â”‚          â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                        â”‚
â”‚          â”‚  â”‚ Title: [      ] â”‚                        â”‚
â”‚          â”‚  â”‚ Note: [       ] â”‚                        â”‚
â”‚          â”‚  â”‚ Due: [      ] â­ â”‚                        â”‚
â”‚          â”‚  â”‚ [Delete] [Save] â”‚                        â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. ä»»åŠ¡é¡¹è®¾è®¡
- åœ†è§’å¡ç‰‡è®¾è®¡
- æ‚¬åœæ•ˆæœ
- ä¼˜å…ˆçº§é¢œè‰²æ ‡è¯†
- å¿«é€Ÿæ“ä½œæŒ‰é’®ï¼ˆé‡è¦ã€æˆ‘çš„ä¸€å¤©ï¼‰
- å®ŒæˆåŠ¨ç”»

#### 4. ç©ºçŠ¶æ€è®¾è®¡
- ç²¾ç¾çš„æ’å›¾
- å‹å¥½çš„å¼•å¯¼æ–‡æ¡ˆ
- å¿«é€Ÿåˆ›å»ºæŒ‰é’®

### 3.3 äº¤äº’åŠ¨ç”»

| äº¤äº’ | åŠ¨ç”»æ•ˆæœ |
|------|----------|
| ä»»åŠ¡å®Œæˆ | å‹¾é€‰åŠ¨ç”» + æ·¡å‡ºä¸‹ç§» |
| æ·»åŠ ä»»åŠ¡ | æ–°ä»»åŠ¡ä»é¡¶éƒ¨æ»‘å…¥ |
| åˆ é™¤ä»»åŠ¡ | å‘å·¦æ»‘å‡º + é«˜åº¦æ”¶ç¼© |
| æ‰“å¼€è¯¦æƒ… | æŠ½å±‰ä»å³ä¾§æ»‘å…¥ |
| åˆ—è¡¨åˆ‡æ¢ | å†…å®¹æ·¡å…¥æ·¡å‡º |
| ç§»åŠ¨ç«¯èœå• | ä»å·¦ä¾§æ»‘å…¥ + é®ç½©æ·¡å…¥ |

---

## å››ã€å›½é™…åŒ– (i18n) æ¶æ„

### 4.1 è¯­è¨€æ”¯æŒ
- âœ… ç®€ä½“ä¸­æ–‡ (zh-CN) - é»˜è®¤
- âœ… è‹±æ–‡ (en)
- ğŸ”„ å¯æ‰©å±•ï¼šç¹ä½“ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰

### 4.2 ç¿»è¯‘æ–‡ä»¶ç»“æ„
```
locales/
â”œâ”€â”€ zh-CN/
â”‚   â”œâ”€â”€ common.json      # é€šç”¨ç¿»è¯‘
â”‚   â”œâ”€â”€ navigation.json  # å¯¼èˆª
â”‚   â”œâ”€â”€ tasks.json       # ä»»åŠ¡ç›¸å…³
â”‚   â”œâ”€â”€ lists.json       # åˆ—è¡¨ç›¸å…³
â”‚   â””â”€â”€ settings.json    # è®¾ç½®
â””â”€â”€ en/
    â””â”€â”€ ...
```

### 4.3 å…³é”®ç¿»è¯‘å†…å®¹

```json
// zh-CN/common.json
{
  "app": {
    "name": "Todo",
    "tagline": "é«˜æ•ˆç®¡ç†ä½ çš„æ¯ä¸€å¤©"
  },
  "actions": {
    "add": "æ·»åŠ ",
    "save": "ä¿å­˜",
    "delete": "åˆ é™¤",
    "cancel": "å–æ¶ˆ",
    "edit": "ç¼–è¾‘",
    "close": "å…³é—­",
    "search": "æœç´¢"
  },
  "empty": {
    "title": "æš‚æ— ä»»åŠ¡",
    "description": "å¼€å§‹æ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡å§ï¼"
  }
}

// zh-CN/navigation.json
{
  "myDay": "æˆ‘çš„ä¸€å¤©",
  "important": "é‡è¦",
  "planned": "è®¡åˆ’å†…",
  "all": "å…¨éƒ¨ä»»åŠ¡",
  "lists": "åˆ—è¡¨"
}

// zh-CN/tasks.json
{
  "addPlaceholder": "æ·»åŠ ä»»åŠ¡",
  "title": "ä»»åŠ¡æ ‡é¢˜",
  "note": "å¤‡æ³¨",
  "dueDate": "æˆªæ­¢æ—¥æœŸ",
  "reminder": "æé†’",
  "priority": {
    "label": "ä¼˜å…ˆçº§",
    "low": "ä½",
    "normal": "ä¸­",
    "high": "é«˜"
  },
  "addToMyDay": "æ·»åŠ åˆ°\"æˆ‘çš„ä¸€å¤©\"",
  "markImportant": "æ ‡è®°ä¸ºé‡è¦",
  "completed": "å·²å®Œæˆ"
}
```

---

## äº”ã€Docker éƒ¨ç½²æ¶æ„

### 5.1 å®¹å™¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Compose                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Nginx     â”‚â”€â”€â”€â”€â–¶â”‚   Web App   â”‚     â”‚   API     â”‚ â”‚
â”‚  â”‚  (Reverse   â”‚     â”‚  (Static)   â”‚     â”‚  Server   â”‚ â”‚
â”‚  â”‚   Proxy)    â”‚     â”‚             â”‚â—€â”€â”€â”€â”€â”‚           â”‚ â”‚
â”‚  â”‚  Port: 80   â”‚     â”‚  Port: 3000 â”‚     â”‚ Port:4000 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â–²                                       â”‚       â”‚
â”‚        â”‚                                       â”‚       â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                          â”‚                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚  SQLite   â”‚                        â”‚
â”‚                    â”‚ (Volume)  â”‚                        â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ–‡ä»¶ç»“æ„

```
docker/
â”œâ”€â”€ docker-compose.yml      # ç”Ÿäº§éƒ¨ç½²é…ç½®
â”œâ”€â”€ docker-compose.dev.yml  # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ web.Dockerfile          # å‰ç«¯æ„å»ºé•œåƒ
â”œâ”€â”€ api.Dockerfile          # åç«¯è¿è¡Œé•œåƒ
â””â”€â”€ nginx.conf              # Nginxé…ç½®
```

### 5.3 Docker Compose é…ç½®

```yaml
# docker/docker-compose.yml
version: '3.8'

services:
  api:
    build:
      context: ..
      dockerfile: docker/api.Dockerfile
    environment:
      - NODE_ENV=production
      - PORT=4000
      - DATABASE_URL=file:/app/data/todo.db
      - JWT_SECRET=${JWT_SECRET}
    volumes:
      - todo-data:/app/data
    networks:
      - todo-network

  web:
    build:
      context: ..
      dockerfile: docker/web.Dockerfile
      args:
        - VITE_API_BASE_URL=/api
    networks:
      - todo-network

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ../apps/web/dist:/usr/share/nginx/html
    depends_on:
      - api
      - web
    networks:
      - todo-network

volumes:
  todo-data:

networks:
  todo-network:
    driver: bridge
```

### 5.4 éƒ¨ç½²è„šæœ¬

```bash
# ä¸€é”®éƒ¨ç½²è„šæœ¬ deploy.sh
#!/bin/bash

# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. æ„å»ºå¹¶å¯åŠ¨
sudo docker-compose -f docker/docker-compose.yml up -d --build

# 3. è¿è¡Œæ•°æ®åº“è¿ç§»
docker-compose exec api npx prisma migrate deploy

# 4. å¥åº·æ£€æŸ¥
curl http://localhost/health

echo "éƒ¨ç½²å®Œæˆï¼"
```

---

## å…­ã€å¼€å‘é˜¶æ®µè§„åˆ’

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„é‡æ„ (Week 1-2)

#### Week 1: åç«¯é‡æ„
- [ ] åˆå§‹åŒ– Fastify + Prisma é¡¹ç›®
- [ ] é…ç½®æ•°æ®åº“æ¨¡å‹ä¸è¿ç§»
- [ ] å®ç°è®¤è¯æ¨¡å— (JWT)
- [ ] å®ç°ç”¨æˆ·æ¨¡å—
- [ ] å®ç°åˆ—è¡¨æ¨¡å— CRUD
- [ ] å®ç°ä»»åŠ¡æ¨¡å— CRUD
- [ ] å®ç°æ­¥éª¤æ¨¡å— CRUD
- [ ] API æµ‹è¯•ä¸æ–‡æ¡£

#### Week 2: å‰ç«¯åŸºç¡€é‡æ„
- [ ] åˆå§‹åŒ–æ–°é¡¹ç›® (Vite + React + TypeScript)
- [ ] é…ç½® Tailwind CSS + shadcn/ui
- [ ] é…ç½® i18next å›½é™…åŒ–
- [ ] é…ç½® Zustand + React Query
- [ ] å®ç°è®¤è¯é¡µé¢
- [ ] å®ç°ä¸»å¸ƒå±€æ¡†æ¶
- [ ] é›†æˆ API å®¢æˆ·ç«¯

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒåŠŸèƒ½å®ç° (Week 3-4)

#### Week 3: ä»»åŠ¡ç®¡ç†
- [ ] ä»»åŠ¡åˆ—è¡¨è§†å›¾
- [ ] ä»»åŠ¡è¯¦æƒ…æŠ½å±‰
- [ ] æ·»åŠ /ç¼–è¾‘/åˆ é™¤ä»»åŠ¡
- [ ] ä»»åŠ¡ç­›é€‰ä¸æ’åº
- [ ] æ­¥éª¤ç®¡ç†
- [ ] "æˆ‘çš„ä¸€å¤©"åŠŸèƒ½
- [ ] "é‡è¦"æ ‡è®°åŠŸèƒ½

#### Week 4: åˆ—è¡¨ä¸è§†å›¾
- [ ] åˆ—è¡¨ç®¡ç†
- [ ] è‡ªå®šä¹‰åˆ—è¡¨ CRUD
- [ ] "è®¡åˆ’å†…"è§†å›¾ (æ—¥å†)
- [ ] æœç´¢åŠŸèƒ½
- [ ] æ‰¹é‡æ“ä½œ
- [ ] å“åº”å¼é€‚é…

### é˜¶æ®µä¸‰ï¼šä½“éªŒä¼˜åŒ– (Week 5-6)

#### Week 5: åŠ¨ç”»ä¸äº¤äº’
- [ ] Framer Motion åŠ¨ç”»é›†æˆ
- [ ] ä»»åŠ¡å®ŒæˆåŠ¨ç”»
- [ ] é¡µé¢è¿‡æ¸¡åŠ¨ç”»
- [ ] åŠ è½½çŠ¶æ€è®¾è®¡
- [ ] éª¨æ¶å±
- [ ] Toast é€šçŸ¥ç³»ç»Ÿ

#### Week 6: è®¾ç½®ä¸å›½é™…åŒ–
- [ ] ç”¨æˆ·è®¾ç½®é¡µé¢
- [ ] ä¸»é¢˜åˆ‡æ¢ (Light/Dark)
- [ ] è¯­è¨€åˆ‡æ¢
- [ ] è´¦æˆ·ç®¡ç†
- [ ] å®Œæ•´ä¸­æ–‡ç¿»è¯‘
- [ ] è‹±æ–‡ç¿»è¯‘

### é˜¶æ®µå››ï¼šç”Ÿäº§éƒ¨ç½² (Week 7-8)

#### Week 7: Docker ä¸éƒ¨ç½²
- [ ] ç¼–å†™ Dockerfile
- [ ] ç¼–å†™ docker-compose.yml
- [ ] Nginx åå‘ä»£ç†é…ç½®
- [ ] SSL/TLS é…ç½®
- [ ] ç¯å¢ƒå˜é‡ç®¡ç†
- [ ] å¤‡ä»½è„šæœ¬

#### Week 8: æµ‹è¯•ä¸ä¼˜åŒ–
- [ ] å•å…ƒæµ‹è¯•
- [ ] E2E æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å®‰å…¨å®¡è®¡
- [ ] æ–‡æ¡£å®Œå–„
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

---

## ä¸ƒã€API è®¾è®¡è§„èŒƒ

### 7.1 RESTful API çº¦å®š

```
GET    /api/lists           # è·å–åˆ—è¡¨
POST   /api/lists           # åˆ›å»ºåˆ—è¡¨
GET    /api/lists/:id       # è·å–å•ä¸ªåˆ—è¡¨
PATCH  /api/lists/:id       # æ›´æ–°åˆ—è¡¨
DELETE /api/lists/:id       # åˆ é™¤åˆ—è¡¨

GET    /api/tasks           # è·å–ä»»åŠ¡
POST   /api/tasks           # åˆ›å»ºä»»åŠ¡
GET    /api/tasks/:id       # è·å–å•ä¸ªä»»åŠ¡
PATCH  /api/tasks/:id       # æ›´æ–°ä»»åŠ¡
DELETE /api/tasks/:id       # åˆ é™¤ä»»åŠ¡

POST   /api/auth/login      # ç™»å½•
POST   /api/auth/register   # æ³¨å†Œ
POST   /api/auth/refresh    # åˆ·æ–°Token
```

### 7.2 å“åº”æ ¼å¼

```typescript
// æˆåŠŸå“åº”
{
  "success": true,
  "data": { ... },
  "meta": {
    "page": 1,
    "limit": 20,
    "total": 100
  }
}

// é”™è¯¯å“åº”
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "ä»»åŠ¡æ ‡é¢˜ä¸èƒ½ä¸ºç©º",
    "details": { ... }
  }
}
```

---

## å…«ã€æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ |
|------|------|
| é¦–å±åŠ è½½ | < 2s |
| Time to Interactive | < 3s |
| API å“åº”æ—¶é—´ (P95) | < 100ms |
| Lighthouse æ€§èƒ½è¯„åˆ† | > 90 |
| Lighthouse å¯è®¿é—®æ€§ | > 95 |

---

## ä¹ã€å®‰å…¨è€ƒè™‘

- [ ] JWT Token æœ‰æ•ˆæœŸç®¡ç†
- [ ] å¯†ç  bcrypt åŠ å¯†
- [ ] SQL æ³¨å…¥é˜²æŠ¤ (Prisma)
- [ ] XSS é˜²æŠ¤
- [ ] CSRF é˜²æŠ¤
- [ ] è¾“å…¥éªŒè¯ (Zod)
- [ ] é€Ÿç‡é™åˆ¶
- [ ] CORS é…ç½®
- [ ] ç¯å¢ƒå˜é‡éš”ç¦»

---

## åã€æ–‡ä»¶æ¸…å•

### æ–°å»º/ä¿®æ”¹æ–‡ä»¶

```
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                    # å®Œå…¨é‡å†™
â”‚   â””â”€â”€ api/                    # å®Œå…¨é‡å†™
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ docker-compose.dev.yml
â”‚   â”œâ”€â”€ web.Dockerfile
â”‚   â”œâ”€â”€ api.Dockerfile
â”‚   â””â”€â”€ nginx.conf
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ PRODUCTION_REBUILD_PLAN.md
â”‚   â””â”€â”€ DEPLOYMENT.md
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ deploy.sh
â””â”€â”€ package.json               # æ›´æ–°è„šæœ¬
```

---

## åä¸€ã€é£é™©è¯„ä¼°ä¸ç¼“è§£

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| é‡æ„å‘¨æœŸè¿‡é•¿ | é«˜ | åˆ†é˜¶æ®µäº¤ä»˜ï¼Œä¿æŒå¯ç”¨æ€§ |
| æ•°æ®è¿ç§»é—®é¢˜ | ä¸­ | æå‰è®¾è®¡è¿ç§»è„šæœ¬ï¼Œæµ‹è¯•éªŒè¯ |
| æ€§èƒ½ä¸è¾¾é¢„æœŸ | ä¸­ | æ—©æœŸæ€§èƒ½æµ‹è¯•ï¼ŒæŒç»­ç›‘æ§ |
| æµè§ˆå™¨å…¼å®¹æ€§ | ä½ | ä½¿ç”¨ç°ä»£å·¥å…·é“¾ï¼Œpolyfill |

---

## åäºŒã€æˆåŠŸæ ‡å‡†

- [ ] æ‰€æœ‰ MVP åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- [ ] Docker ä¸€é”®éƒ¨ç½²æˆåŠŸ
- [ ] Lighthouse è¯„åˆ† > 90
- [ ] ç§»åŠ¨ç«¯ä½“éªŒè‰¯å¥½
- [ ] ä»£ç é€šè¿‡ TypeScript ä¸¥æ ¼æ£€æŸ¥
- [ ] API å“åº”æ—¶é—´ < 100ms (P95)
